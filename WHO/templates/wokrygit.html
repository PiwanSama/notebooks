
<!doctype html>
<html lang="en" class="h-100">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Samalie Piwan">
    <title>Exploring Maternal Mortality Rate</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
	integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">

    </style>
    <link href="styles/custom.css" rel="stylesheet">
  </head>
  <body>
	<div>
		<div id="cover">
			<div class="cover-container d-flex w-100 h-100 p-3 flex-column">
				<div class="card card-custom mt-3 p-3">
					<h1 class="title-bold">Exploring Maternal Mortality Rate</h1>
				</div>
				<div class="card card-custom mt-3 p-3">
					<p class="lead">Maternal mortality rate, often measured as the number of maternal deaths per 100,000 live births, is a critical indicator of the health and well-being of mothers during pregnancy, childbirth, and the postpartum period. Monitoring and addressing maternal mortality are essential components of global efforts to improve maternal health, reduce health disparities, and ensure access to quality healthcare for women worldwide.</p>
				</div>
			</div>
		</div>
		<div class="p-5">
			<div id="background" class="my-3">
				<h3 class="title-blue">Background</h3>

			</div>

			<div id="analysis" class="analysis my-3">
				<h3 class="title-blue">Analysis Results</h3>
				<div id="rez"></div>
				<!--iframe  width="100%" height="600" frameborder="0" scrolling="no"
				src ="../exports/maternal_mortality_gdp.html"-->
			</div>

		</div>
		<footer class="text-white p-5">
			<h3 class="text-white">References</h3>
			<ol>
				<li class="list-group-item">An item</li>
				<li class="list-group-item">A second item</li>
				<li class="list-group-item">A third item</li>
				<li class="list-group-item">A fourth item</li>
				<li class="list-group-item">And a fifth one</li>
			</ol>
			<p class="lead">Designed and Prepared By Samalie Piwan</p>
		</footer>
	</div>
	<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
	<script src='https://cdn.plot.ly/plotly-2.27.0.min.js'></script>
	<script src='https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.min.js'></script>
	<script>
		d3.csv("https://raw.githubusercontent.com/plotly/datasets/master/gapminder_with_codes.csv", function(err, rows){

		function filter_and_unpack(rows, key, year) {
		return rows.filter(row => row['year'] == year).map(row => row[key])
		}

		var frames = []
		var slider_steps = []

		var n = 11;
		var num = 1952;
		for (var i = 0; i <= n; i++) {
		var z = filter_and_unpack(rows, 'lifeExp', num)
		var locations = filter_and_unpack(rows, 'country', num)

        console.log(z, locations);

		frames[i] = {data: [{z: z, locations: locations, text: locations}], name: num}
		slider_steps.push ({
		label: num.toString(),
		method: "animate",
		args: [[num], {
		mode: "immediate",
		transition: {duration: 300},
		frame: {duration: 300}
		}
		]
		})
		num = num + 5
		}

		var data = [{
		type: 'choropleth',
		locationmode: 'world',
		locations: frames[0].data[0].locations,
		z: frames[0].data[0].z,
		text: frames[0].data[0].locations,
		zauto: false,
		zmin: 30,
		zmax: 90

		}];
		var layout = {
		title: 'World Life Expectency<br>1952 - 2007',
		geo:{
		scope: 'world',
		countrycolor: 'rgb(255, 255, 255)',
		showland: true,
		landcolor: 'rgb(217, 217, 217)',
		showlakes: true,
		lakecolor: 'rgb(255, 255, 255)',
		subunitcolor: 'rgb(255, 255, 255)',
		lonaxis: {},
		lataxis: {}
		},
		updatemenus: [{
		x: 0.1,
		y: 0,
		yanchor: "top",
		xanchor: "right",
		showactive: false,
		direction: "left",
		type: "buttons",
		pad: {"t": 87, "r": 10},
		buttons: [{
		method: "animate",
		args: [null, {
		fromcurrent: true,
		transition: {
		duration: 200,
		},
		frame: {
		duration: 500
		}
		}],
		label: "Play"
		}, {
		method: "animate",
		args: [
		[null],
		{
		mode: "immediate",
		transition: {
		duration: 0
		},
		frame: {
		duration: 0
		}
		}
		],
		label: "Pause"
		}]
		}],
		sliders: [{
		active: 0,
		steps: slider_steps,
		x: 0.1,
		len: 0.9,
		xanchor: "left",
		y: 0,
		yanchor: "top",
		pad: {t: 50, b: 10},
		currentvalue: {
		visible: true,
		prefix: "Year:",
		xanchor: "right",
		font: {
		size: 20,
		color: "#666"
		}
		},
		transition: {
		duration: 300,
		easing: "cubic-in-out"
		}
		}]
		};

		Plotly.newPlot('rez', data, layout).then(function() {
		Plotly.addFrames('rez', frames);
		});
		})
	</script>
  </body>
</html>
